## Headless 请求 ##
无头浏览器引擎可以完全自定义，用户操作可以编写脚本，允许完全控制浏览器。

**Action（行动）**

Action 是 Nuclei Headless引擎 的单个任务，每个操作都是以某种方式操纵浏览器状态，最终达到我们需要的效果

Action参数列表及其操作如下

***navigate（导航）***

nacigate 访问指定的 URL，url 字段支持诸如{{BaseURL}}, 之类的变量

	action: navigate
	args: 
	  url: "{{BaseURL}}

***script（脚本）***

Script 在当前浏览器页面上运行一段 JS 代码

	action: script
	args:
	  code: alert(document.domain)

还可以在 JS 对象上运行一个匹配器来检查它的值

***匹配器***

	- action: script
	  args:
	    code: window.random-object
	  name: script-name
	
	matchers:
	  - type: word
	    part: script-name
	    words:
	      - "some-value"

***hook***


	- action: script
	  args:
	    code: (function() { window.alert=function(){} })()
	    hook: true # 开启 hook

***模拟点击***

	action: click # 鼠标左键单击
	args: 
	  by: xpath
	  xpath: /html/body/div[1]/div[3]/form/div[2]/div[1]/div[1]/div/div[2]/input

	action: rightclick # 鼠标右键单击
	args:
		by:xpath
		xpath: /html/body/div[1]/div[3]/form/div[2]/div[1]/div[1]/div/div[2]/input

***模拟输入***

	action: text
	args: 
	  by: xpath
	  xpath: /html/body/div[1]/div[3]/form/div[2]/div[1]/div[1]/div/div[2]/input
	  value: username

***截屏***

	action: screenshot
	args: 
	  to: /root/test/screenshot-web
	  fullpage: true # 截取整页

***输入时间***

	action: time
	args: 
	  by: xpath
	  xpath: /html/body/div[1]/div[3]/form/div[2]/div[1]/div[1]/div/div[2]/input
	  value: 2006-01-02T15:04:05Z07:00

***执行选择器***

	action: select
	args: 
	  by: xpath
	  xpath: /html/body/div[1]/div[3]/form/div[2]/div[1]/div[1]/div/div[2]/input
	  selected: true
	  value: option[value=two]
	  selector: regex

***等待页面加载完成***

	action: waitload # 等待1秒

***获取资源***

	action: getresource # 返回元素的src属性
	name: extracted-value-src 
	args: 
	  by: xpath
	  xpath: /html/body/div[1]/div[3]/form/div[2]/div[1]/div[1]/div/div[2]/input

***提取文本***

	action: extract # 默认提取 value 文本
	name: extracted-value
	args: 
	  by: xpath
	  xpath: /html/body/div[1]/div[3]/form/div[2]/div[1]/div[1]/div/div[2]/input

***提取元素属性***

	action: extract
	name: extracted-value-href
	args: 
	  by: xpath
	  xpath: /html/body/div[1]/div[3]/form/div[2]/div[1]/div[1]/div/div[2]/input
	  target: attribute
	  attribute: href # 提取的属性

***覆盖请求方式***

	action: setmethod # 使用 setmethod 覆盖请求
	args: 
	  part: request
	  method: DELETE

***覆盖 HTTP 头***

AddHeader 向请求/响应添加标头。这不会覆盖任何预先存在的标头

	action: addheader 
	args: 
	  part: response # 也可以是 requests
	  key: Content-Security-Policy
	  value: "default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;"

***设置 HTTP 头***

	action: setheader
	args: 
	  part: response # 也可以是 requests
	  key: Content-Security-Policy
	  value: "default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;"

***删除 HTTP 头***

	action: deleteheader
	args: 
	  part: response # 也可以是 requests
	  key: Content-Security-Policy

***设置请求内容***

	action: setbody
	args: 
	  part: response # 也可以是 requests
	  body: '{"success":"ok"}'

***等待事件***

	action: waitevent
	args: 
	  event: 'Page.loadEventFired'

更多事件请[点击查询](https://github.com/go-rod/rod/blob/master/lib/proto/definitions.go)

[1](javascript:alert(document.URL))
